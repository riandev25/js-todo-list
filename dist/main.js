(()=>{const e=document.querySelector(".add-projects"),t=document.querySelector(".modal-project"),n=(document.querySelector("[data-new-list-form]"),document.querySelector("[data-new-list-input]")),a=document.querySelector("#submit-project-button"),c=document.querySelector("#close-project-button"),o=document.querySelector("[data-lists]"),l=document.querySelector("[data-list-display-container]"),r=document.querySelector("[data-list-title]"),d=document.querySelector("[data-list-count]"),s=document.querySelector("[data-tasks]"),i=document.getElementById("task-template"),u=document.querySelector(".add-todo-button"),m=document.querySelector(".modal-task"),p=document.querySelector("[data-new-task-input]"),k=document.querySelector("#submit-task-button"),v=document.querySelector("#close-task-button"),y=document.querySelector("[data-clear-complete-tasks-button]"),S=document.querySelector("[data-delete-list-button]"),f="task.lists",q="task.selectedListId";let g=JSON.parse(localStorage.getItem(f))||[],L=localStorage.getItem(q);const E=document.querySelector(".hamburger"),h=(document.querySelector(".close-mark"),document.querySelector("[data-navbar]"));function b(){w(),C()}function w(){localStorage.setItem(f,JSON.stringify(g)),localStorage.setItem(q,L)}function C(){I(o),g.forEach((e=>{const t=document.createElement("li");t.dataset.listId=e.id,t.classList.add("list-name"),t.innerText=e.name,e.id===L&&t.classList.add("active-list"),o.appendChild(t)}));const e=g.find((e=>e.id===L));null==L?l.style.display="none":(l.style.display="",r.innerText=e.name,D(e),I(s),function(e){e.tasks.forEach((e=>{const t=document.importNode(i.content,!0),n=t.querySelector("input");n.id=e.id,n.checked=e.complete;const a=t.querySelector("label");a.htmlFor=e.id,a.append(e.name),s.appendChild(t)}))}(e))}function D(e){const t=e.tasks.filter((e=>!e.complete)).length,n=1===t?"task":"tasks";d.innerText=`Current ${n}: ${t}`}function I(e){for(;e.firstChild;)e.removeChild(e.firstChild)}E.addEventListener("click",(e=>{h.classList.add("active-navbar")})),document.addEventListener("keydown",(e=>{"Escape"===e.key&&h.classList.remove("active-navbar")})),o.addEventListener("click",(e=>{"li"===e.target.tagName.toLowerCase()&&(L=e.target.dataset.listId,b())})),s.addEventListener("click",(e=>{if("input"===e.target.tagName.toLowerCase()){const t=g.find((e=>e.id===L));t.tasks.find((t=>t.id===e.target.id)).complete=e.target.checked,w(),D(t)}})),e.addEventListener("click",(e=>{e.preventDefault(),t.show()})),u.addEventListener("click",(e=>{e.preventDefault(),m.show()})),c.addEventListener("click",(e=>{e.preventDefault(),t.close(),n.value=""})),v.addEventListener("click",(e=>{e.preventDefault(),m.close(),n.value=""})),a.addEventListener("click",(e=>{t.close(),e.preventDefault();const a=n.value;if(null==a||""===a)return;const c=(o=a,{id:Date.now().toString(),name:o,tasks:[]});var o;n.value=null,g.push(c),b()})),k.addEventListener("click",(e=>{m.close(),e.preventDefault();const t=p.value;if(null==t||""===t)return;const n=(a=t,{id:Date.now().toString(),name:a,complete:!1});var a;p.value=null,g.find((e=>e.id===L)).tasks.push(n),b()})),y.addEventListener("click",(e=>{const t=g.find((e=>e.id===L));t.tasks=t.tasks.filter((e=>!e.complete)),b()})),S.addEventListener("click",(e=>{g=g.filter((e=>e.id!==L)),L=null,b()})),C()})();